# ============================================================================
# CivicQ Backend - Staging Environment Configuration
# ============================================================================
# IMPORTANT: Copy this file to .env.staging and fill in your values
# Command: cp .env.staging.example .env.staging
# ============================================================================

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=staging
DEBUG=false

# ============================================================================
# SECURITY
# ============================================================================
# Still use secure keys in staging (but different from production)
SECRET_KEY=CHANGEME-generate-with-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# CORS & ALLOWED ORIGINS
# ============================================================================
ALLOWED_ORIGINS=https://staging.civicq.com,https://staging-app.civicq.com,http://localhost:3000

# ============================================================================
# APPLICATION URLs
# ============================================================================
FRONTEND_URL=https://staging.civicq.com
BACKEND_URL=https://staging-api.civicq.com

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_URL=postgresql://civicq_staging:CHANGEME_DB_PASSWORD@staging-db.region.rds.amazonaws.com:5432/civicq_staging
DATABASE_ECHO=false

# ============================================================================
# REDIS
# ============================================================================
REDIS_URL=redis://:CHANGEME_REDIS_PASSWORD@staging-redis.cache.amazonaws.com:6379/0

# ============================================================================
# CELERY
# ============================================================================
CELERY_BROKER_URL=redis://:CHANGEME_REDIS_PASSWORD@staging-redis.cache.amazonaws.com:6379/1
CELERY_RESULT_BACKEND=redis://:CHANGEME_REDIS_PASSWORD@staging-redis.cache.amazonaws.com:6379/1

# ============================================================================
# S3 / OBJECT STORAGE
# ============================================================================
S3_BUCKET=civicq-media-staging
S3_REGION=us-west-2
S3_ACCESS_KEY=CHANGEME_AWS_ACCESS_KEY
S3_SECRET_KEY=CHANGEME_AWS_SECRET_KEY
S3_ENDPOINT=

# CDN (optional for staging)
CDN_URL=

# ============================================================================
# VIDEO PROCESSING
# ============================================================================
MAX_VIDEO_DURATION_SECONDS=180
VIDEO_TIME_LIMIT_COUNCIL=90
VIDEO_TIME_LIMIT_MAYOR=120
VIDEO_TIME_LIMIT_MEASURE=180

# ============================================================================
# AI/ML SERVICES
# ============================================================================
OPENAI_API_KEY=sk-CHANGEME_OPENAI_API_KEY
ANTHROPIC_API_KEY=sk-ant-CHANGEME_ANTHROPIC_API_KEY
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929
ENABLE_AI_FEATURES=true
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
SIMILARITY_THRESHOLD=0.85

# ============================================================================
# SMS SERVICE
# ============================================================================
TWILIO_ACCOUNT_SID=CHANGEME_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=CHANGEME_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# EMAIL SERVICE
# ============================================================================
SENDGRID_API_KEY=SG.CHANGEME_SENDGRID_API_KEY
EMAIL_FROM=staging@civicq.com

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=DEBUG  # More verbose in staging
SENTRY_DSN=https://CHANGEME@o123456.ingest.sentry.io/789012
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=1.0  # 100% sampling in staging

# ============================================================================
# RATE LIMITING (more lenient in staging)
# ============================================================================
RATE_LIMIT_QUESTIONS_PER_DAY=50
RATE_LIMIT_VOTES_PER_HOUR=500

# ============================================================================
# CONTENT MODERATION
# ============================================================================
AUTO_MODERATE=true
TOXICITY_THRESHOLD=0.7

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_VIDEO_RECORDING=true
ENABLE_REBUTTALS=true
ENABLE_SOURCE_ATTACHMENTS=true
ENABLE_VIEWPOINT_CLUSTERING=true

# ============================================================================
# SESSION MANAGEMENT
# ============================================================================
SESSION_EXPIRE_SECONDS=86400
REMEMBER_ME_EXPIRE_SECONDS=2592000

# ============================================================================
# VERIFICATION
# ============================================================================
VERIFICATION_METHOD=sms
VERIFICATION_CODE_EXPIRE_MINUTES=15
